@using BlazorRpgPersona.Models;
@using Microsoft.Extensions.Logging

@inject ILogger<RpgPersonaFrame> Logger

<iframe class="rpgPersonaFrame @FrameName" src="about:blank" name="@FrameName"></iframe>

@functions
{
[Parameter]
string FrameName { get; set; }

[Parameter]
string FrameSource { get; set; }

protected override async Task OnAfterRenderAsync()
{
    await JSRuntime.Current.InvokeAsync<object>(
        "statusReportSender.send", new FrameApplicationStatusReport()
        {
            FrameName = FrameName,
            Status = "Starting Initial Frame Request."
        });

    await JSRuntime.Current.InvokeAsync<object>(
        "frameStarter.startFrame", FrameName, FrameSource);
}
}
